{"version":3,"sources":["site/progress.js"],"names":["progress","el","bars","document","querySelectorAll","modal","querySelector","body","fxFillBar","classList","contains","percentage","dataset","value","complete","innerBar","animationDuration","initialTimeDelay","setTimeout","style","width","transitionDuration","fxCountNumber","finalValue","frameDuration","totalFrames","Math","round","ease","t","number","countTo","parseInt","frame","counter","setInterval","currentCount","innerHTML","fxBarCompleted","clearInterval","innerText","textClaim","add","fxClaimReward","remove","textComplete","fxOpenModal","display","fxCloseModal","events","forEach","addEventListener","init"],"mappings":"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","file":"app.js","sourcesContent":["const progress = {\r\n\tel: {\r\n\t\tbars: document.querySelectorAll('.js-progress'),\r\n\t\tmodal: document.querySelector('.js-modal'),\r\n\t\tbody: document.body\r\n\t},\r\n\r\n\tfxFillBar (el) {\r\n\t\tif(!el.classList.contains('claimed')) {\r\n\t\t\tconst percentage = el.dataset.value * 100 / el.dataset.complete,\r\n\t\t\t\tinnerBar = el.querySelector('.progress__bar-inner'),\r\n\t\t\t\tanimationDuration = percentage * .05,\r\n\t\t\t\tinitialTimeDelay = 500\r\n\t\t\t\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tinnerBar.style.width = `${percentage}%`\r\n\t\t\t\tinnerBar.style.transitionDuration = `${animationDuration}s`\r\n\t\t\t\tthis.fxCountNumber(el, animationDuration, initialTimeDelay)\r\n\t\t\t}, initialTimeDelay)\r\n\t\t}\r\n\t},\r\n\r\n\tfxCountNumber (el, animationDuration, initialTimeDelay) {\r\n\t\tconst finalValue = el.dataset.value,\r\n\t\t\tframeDuration = .2 / 60,\r\n\t\t\ttotalFrames = Math.round(animationDuration / frameDuration),\r\n\t\t\tease = t => t * ( 2 - t ),\r\n\t\t\tnumber = el.querySelector('.js-progress-number'),\r\n\t\t\tcountTo = parseInt(finalValue, 10)\r\n\r\n\t\tlet frame = 0\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst counter = setInterval (() => {\r\n\t\t\t\tframe++\r\n\t\t\t\tconst progress = ease(frame / totalFrames),\r\n\t\t\t\t\tcurrentCount = Math.round(countTo * progress)\r\n\t\r\n\t\t\t\tif (parseInt(number.innerHTML, 10) !== currentCount) {\r\n\t\t\t\t\tnumber.innerHTML = currentCount\r\n\t\t\t\t\tcurrentCount === parseInt(el.dataset.complete) && this.fxBarCompleted(el)\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tframe === totalFrames && clearInterval(counter)\r\n\t\t\t\t\r\n\t\t\t}, frameDuration)\r\n\t\t}, initialTimeDelay)\r\n\t},\r\n\r\n\tfxBarCompleted (el) {\r\n\t\tconst innerText = el.querySelector('.progress__bar-text')\r\n\t\tinnerText.innerHTML = innerText.dataset.textClaim\r\n\t\tel.classList.add('complete')\r\n\t},\r\n\r\n\tfxClaimReward(el) {\r\n\t\tif(el.classList.contains('complete')) {\r\n\t\t\tconst innerText = el.querySelector('.progress__bar-text')\r\n\t\t\tinnerText.innerHTML = innerText.dataset.textClaim\r\n\t\t\tel.classList.remove('complete')\r\n\t\t\tel.classList.add('claimed')\r\n\t\t\tinnerText.innerHTML = innerText.dataset.textComplete\r\n\t\t\tthis.fxOpenModal()\r\n\t\t}\r\n\t},\r\n\r\n\tfxOpenModal () {\r\n\t\tthis.el.modal.style.display = 'flex'\r\n\t\tthis.el.body.classList.add('no-scroll-fixed')\r\n\t},\r\n\r\n\tfxCloseModal () {\r\n\t\tthis.el.modal.style.display = 'none'\r\n\t\tthis.el.body.classList.remove('no-scroll-fixed')\r\n\t},\r\n\r\n\tevents () {\r\n\t\tthis.el.bars.forEach(el => {\r\n\t\t\tthis.fxFillBar(el)\r\n\t\t\tel.addEventListener('click', () => {\r\n\t\t\t\tthis.fxClaimReward(el)\r\n\t\t\t})\r\n\t\t\t\r\n\t\t})\r\n\r\n\t\tthis.el.modal.querySelector('.js-close-modal').addEventListener('click', () => {\r\n\t\t\tthis.fxCloseModal()\r\n\t\t})\r\n\t},\r\n\r\n\tinit () {\r\n\t\tthis.events()\r\n\t}\r\n}\r\n\r\nprogress.init()"]}